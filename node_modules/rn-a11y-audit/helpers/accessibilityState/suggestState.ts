import pathMod from "path";
import { stateMap } from "../../constants";
import { hasProp } from "../hasProp";
import { AttrType } from "../../types";

export const NON_INTERACTIVE = new Set(["Text"]);

export const inferFromTag = (tag: string): string | null => {
  return stateMap[tag] ?? null;
}

export const inferFromFilename = (filePath?: string): string | null => {
  if (!filePath) return null;
  const base = pathMod.basename(filePath).toLowerCase();
  for (const [comp, state] of Object.entries(stateMap)) {
    if (base.includes(comp.toLowerCase())) return state;
  }
  return null;
}

export const hasAriaState = (attributes: AttrType[], key: string): boolean => {
    const aria =
      key === "checked"
        ? "aria-checked"
        : key === "expanded"
        ? "aria-expanded"
        : key === "selected"
        ? "aria-selected"
        : null;
    if (!aria) return false;
  
    return hasProp(aria, attributes);
  };
  